# All leaks listed here are non-repeat offenders
# (ie they happen only a fixed number of times per process execution)

# List maintained at
# https://gist.github.com/mmomtchev/07fad9af00bc6faa9c404e614de908da
# git clone https://gist.github.com/07fad9af00bc6faa9c404e614de908da.git

# Use with
# export LSAN_OPTIONS=suppressions=$(pwd)/napi-leaks-suppression.txt

# With Node.js 24+ there has been a dramatic improvement in V8
# compared to previous versions, leaving only a few cases

# Known leaks in Node-API
leak:napi_module_register
leak:napi_register_module_v1
# This is not really a leak since exposing the GC and calling it
# will trigger the WeakCallback of the ExternalWrapper
# However Node (V8?) is particularly lazy when it comes to deleting it
leak:napi_create_external

# Known leaks in the Node.js 24 runtime
leak:node::contextify::Contextify

# Known leaks in V8
# (none atm)
